安全分析におけるHAZOPによる想定外の洗い出し

   小川　清,　X, Y    

Unexpected identification using HAZOP in safety analysis 
Kiyoshi Ogawa     X,  Y

To clarification of unexpected identification in safety analysis on AUTOSAR platform, we try to use HAZOP with FTA and FMEA. In early stage of AUTOSAR, TOPPERS open source OSEK OS was analyzed. Road Administrator and Traffic regulators should be joined in safety analysis of auto driving car system.

KEY WORDS: Safety, HAZOP, Safety Analysis, FTA, FMEA

1．ま え が き
1.1 概要
自動運転に伴う複雑化する自動車安全に対応するため、FTA[1], FMEA[2]を用いた安全分析の初期段階においてHAZOP[3]と組み合わせることにより想定外を洗い出しを行ってきた。それぞれの組織内だけでなく、日本技術士会[4][5][6]、情報処理学会が共催しているSWEST[7][8][9][10][11]、NPO法人ソフトウェアテスト技術振興協会が主催しているテストシンポジウム[12][13][14]、NSPICE[15]などの各種学術団体でも実施してきた。
自動車用ソフトウェア共通基盤AUTOSAR[16] では従来の自動車に対応したClassic Platformと自動運転で利用するTCP/IPに対応したAdaptive Platformに分かれている。基本的な通信規約もCAN[17]とTCP/IP[18]に分かれている。AUTOSARのClassic Platformでは、ISO OSEK OS[19]に基づいており、エンジンやモータが角速度制御の必要性からタスクで管理するのではなく、割り込み制御を基本として、時間制約がより緩い部分の通信、ログをタスク制御とする基本設計である。それに対して、Adaptive Platformは、ISO/IEC POSIX[20]に基づいており、C言語[21]、Unix/Linux[22] 及びTCP/IPとともに発展してきている。現在では実用的なOSおよび通信ソフトウェアがオープンソースで提供されている。時間制約をさほど考慮しなくてもよいシステムで利用されてきていた。
AUTOSARはMBSD(model based system design)で様々な模擬試験を実施して効率よく設計する上での共通の土台(platform)を構築するものであった。Classic Platform相当への対応は、OSEK OSに基づいたオープンソースの事業[23]を展開する際に実施している。その際の知見としては、運転者、自動車製造事業者、自動車部品製造事業者、半導体自動車の間で、必ずしも利害が一致するとは限らず、目標設定をどこに置くかが重要であった。死亡事故をいかに減らすかを目標設定にすると、道路管理者、交通規制当局との意見交換が必要となることが分かった。そこで、鉄道のように輸送基盤、輸送機器、輸送規制を一体で行っている鉄道事業者の経験に学ぶことを課題設定した[24]。
自動運転では、Classic Platform 検討時点で想定した関係者との本格的な共同作業に必要な資料を道路管理者、交通規制当局との間で相互補完的に提供しあうことが肝要である。特に、各国の道路規制の違い、自然環境の違い、文化の違いなどを横顔(profile)にして共通で対応できる事項と個別に対応できる事項とを区別するとよい。
1.2 本研究の目標
 AUTOSARの二つのPlatformに対応したOS,通信規約から診断に至るまでの幅広いシステムを、設計者、分析専門家、利用者の意図の整合性を確認することが大きな課題となっている。
このように基本設計の異なるソフトウェアで共通の応用を行うのは、いくつかの計算機製造業社が自社の古いOSを新しいOSの上で実装して提供する方法の他、現在流行しているdocker[25]などの仮想環境上のOSなどであり、開発現場かクラウド上で実現しており、利用者や応用ソフトウェア設計者からは見えにくい状況になっている。
1.3 用語の確認
　AUTOSARでは、現在237文書とUMLModel, Metamodel, Metamodel Shemaの３文書ある[26]。237文書で出現する単語の数を集計したところ、433,366種類5,968,967語であった[27]。定義済みの略号は参考文献内も含め数百に上り、MAC, TCPなど同じ略号で異なる意味の単語が存在している[28]。
　例えば、ISO, IECの文書群で文書間の整合性を機械的には行っていないのは、改定作業の費用負担ができない文書の扱いについての合意を取るのが難しいという事情があるかもしれない。AUTOSARのような同時に改定する文書では、より容易のように見えるが、ソフトウェアの保守と同様で、ある部分の変更が他の部分に影響を与える場合、どちらを優先するかは、全体の構造を決定する構造決定者(architect)の存在が重要である。
1.4 道具立て
 公開可能な資料はgithubのPublicにおき[30]、非公開の資料はgitlabのPrivateに置いている。AUTOSARのUMLモデル及メタモデルはEnterPrise Architectのファイルが配布されている[31]。また田中伸明が提案している道具はEnterPrise ArchitectのAddonの形式として評価している[31][32]。
　関連する研究のうち、プログラミングに関する事項はできるだけdockerで作成し、docker hubに登録するようにしている(33)。

2．横顔(profile)
2.1 自然条件
　自然条件には、気温、湿度、気圧、標高、酸素濃度、日照、
電磁波、
2.2 道路環境
　工事、舗装、幅、車線、分離、信号、隧道、駐車場、バス停・タクシー乗り場、充電設備、通信基盤、倉庫
2.3 社会環境
　法制度（責任、税制）、保険、契約
 
3. 
 
．参 考 文 献
(1) JIS C 5750-4-4:2011 ディペンダビリティ マネジメント―第４－４部：システム信頼性のための解析技法―故障の木解析（ＦＴＡ）, 日本規格協会, 2011. 
(2) JIS C 5750-4-3:2011 ディペンダビリティ マネジメント―第４－３部：システム信頼性のための解析技法―故障モード・影響解析（FMEA）の手順, 日本規格協会, 2011.
(3) HAZOP
(4) 遠隔HAZOP演習,日本技術士会情報工学部会,小川清 2012.8
(5) HAZOPによる安全分析について, 日本技術士会中部航空部会, 小川清,2016.12
(6) 安全・安心シリーズ 想定外を減らす11個の「魔法の言葉」, 小川清, 技術士 (602), 2017.2 p.16-19
(7) 実践HAZOP演習, 小川清, SWEST2010, 2010.9
(8) 想定外をなくす 実践安全分析(HAZOP) 2.0, 小川清, SWEST2011, 2011.9
(9) HAZOP演習, 小川清, SWEST2013, 2013.8
(10) HAZOP 3.0 Safety and Security, 小川清, SWEST2017, 2017.8
(11) 図を使って分析すればこんなに簡単, 小川清, SWEST2019, 2019.9
(12)
(13)
(14)
(31) 田中伸明、小川清, “安全分析の図的表現方法、及び設計文書と親和性の高いツールの提案”, 安全工学シンポジウム2019 講演予稿集, 日本学術会議, 2019. 

(30) https://github.com/kaizen-nagoya/hazop/blob/
master/reference/Japanese.md 
(33) 
